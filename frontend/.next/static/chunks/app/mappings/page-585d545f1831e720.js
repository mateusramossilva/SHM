(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[576],{252:(e,t,a)=>{Promise.resolve().then(a.bind(a,7539))},7539:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(5155),l=a(2115),n=a(5125);let c="https://SEU-BACKEND.up.railway.app";function r(){let[e,t]=(0,l.useState)([]),[a,r]=(0,l.useState)([]),[o,i]=(0,l.useState)(null),[d,x]=(0,l.useState)(null),[p,m]=(0,l.useState)({}),[u,h]=(0,l.useState)({origem:"",destino:""}),[b,g]=(0,l.useState)("");(0,l.useEffect)(()=>{f()},[]),(0,l.useEffect)(()=>{e.length>0&&!o&&i(e[0].name)},[e]),(0,l.useEffect)(()=>{o?j():r([])},[o]);let f=async()=>{t((await n.A.get("".concat(c,"/automation/companies"))).data)},j=async()=>{r((await n.A.get("".concat(c,"/automation/escalas?empresa=").concat(o))).data)},N=async()=>{b&&(await n.A.post("".concat(c,"/automation/companies"),{name:b.toUpperCase()}),g(""),await f(),i(b.toUpperCase()))},w=async e=>{confirm("Remover a aba ".concat(e,"? (As regras n\xe3o ser\xe3o apagadas, apenas ocultas)"))&&(await n.A.delete("".concat(c,"/automation/companies/").concat(e)),i(null),await f())},v=async()=>{if(!u.origem||!u.destino)return alert("Preencha origem e destino");await n.A.post("".concat(c,"/automation/escalas"),{...u,empresa:o}),h({origem:"",destino:""}),j()},k=async()=>{await n.A.patch("".concat(c,"/automation/update/escala/").concat(d),p),x(null),j()},F=async e=>{await n.A.patch("".concat(c,"/automation/toggle/escala/").concat(e.id),{ativa:!e.ativa}),j()},y=async e=>{confirm("Excluir esta escala permanentemente?")&&(await n.A.delete("".concat(c,"/automation/escalas/").concat(e)),j())};return(0,s.jsxs)("div",{className:"max-w-6xl mx-auto py-12 px-8 font-sans bg-[#F9FBFF] min-h-screen text-slate-900",children:[(0,s.jsxs)("div",{className:"mb-10",children:[(0,s.jsxs)("h1",{className:"text-3xl font-black uppercase italic tracking-tighter mb-8",children:["MAPEAMENTO ",(0,s.jsx)("span",{className:"text-[#0052FF]",children:"POR EMPRESA"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[e.map(e=>{let t=o===e.name;return(0,s.jsxs)("div",{className:"flex items-center rounded-2xl border transition-all shadow-sm overflow-hidden ".concat(t?"bg-[#0052FF] border-[#0052FF]":"bg-white border-slate-200"),children:[(0,s.jsx)("button",{onClick:()=>i(e.name),className:"px-5 py-3 text-[11px] font-black uppercase tracking-widest ".concat(t?"text-white":"text-slate-400 hover:text-[#0052FF]"),children:e.name}),(0,s.jsx)("button",{onClick:()=>w(e.name),className:"px-3 py-3 text-xs font-bold ".concat(t?"text-blue-300 hover:text-white":"text-slate-200 hover:text-red-500"),children:"\xd7"})]},e.name)}),(0,s.jsxs)("div",{className:"flex items-center bg-white rounded-2xl border border-dashed border-slate-300 p-1 ml-2 shadow-sm focus-within:border-[#0052FF]",children:[(0,s.jsx)("input",{className:"bg-transparent px-3 py-2 text-[10px] font-bold uppercase outline-none w-32 placeholder-slate-300",placeholder:"+ NOVA EMPRESA",value:b,onChange:e=>g(e.target.value),onKeyDown:e=>"Enter"===e.key&&N()}),(0,s.jsx)("button",{onClick:N,className:"bg-slate-900 text-white px-3 py-2 rounded-xl font-black text-xs hover:bg-[#0052FF] transition-all",children:"+"})]})]})]}),o?(0,s.jsxs)("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,s.jsxs)("div",{className:"flex justify-between items-end mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-10 w-1 bg-[#0052FF] rounded-full"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Painel de Gest\xe3o"}),(0,s.jsx)("h2",{className:"text-2xl font-black text-slate-800 uppercase italic tracking-tight",children:o})]})]}),(0,s.jsxs)("div",{className:"bg-white px-8 py-4 rounded-[2rem] shadow-xl shadow-blue-50/50 border border-blue-50 text-right",children:[(0,s.jsx)("span",{className:"text-4xl font-black text-[#0052FF] leading-none",children:a.filter(e=>e.ativa).length}),(0,s.jsx)("p",{className:"text-[9px] font-black text-slate-300 uppercase mt-1",children:"Regras Ativas"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_1fr_auto] gap-4 mb-8 bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[9px] font-bold text-slate-300 uppercase ml-2 mb-1 block",children:"Origem (Doctor)"}),(0,s.jsx)("input",{className:"w-full p-4 bg-slate-50 rounded-2xl text-xs font-bold text-slate-700 outline-none focus:ring-2 focus:ring-blue-100",placeholder:"Ex: Plant\xe3o Cl\xednico",value:u.origem,onChange:e=>h({...u,origem:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[9px] font-bold text-slate-300 uppercase ml-2 mb-1 block",children:"Destino (Omie)"}),(0,s.jsx)("input",{className:"w-full p-4 bg-slate-50 rounded-2xl text-xs font-bold text-[#0052FF] outline-none focus:ring-2 focus:ring-blue-100",placeholder:"Ex: 2040 - Servi\xe7os M\xe9dicos",value:u.destino,onChange:e=>h({...u,destino:e.target.value})})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("button",{onClick:v,className:"h-[48px] px-8 bg-[#0052FF] text-white rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-slate-900 transition-all shadow-lg shadow-blue-200",children:"Adicionar"})})]}),(0,s.jsx)("div",{className:"bg-white rounded-[2.5rem] border border-slate-100 shadow-sm overflow-hidden",children:0===a.length?(0,s.jsxs)("div",{className:"p-12 text-center text-slate-300 font-bold text-sm uppercase tracking-widest",children:["Nenhuma regra cadastrada para ",o]}):(0,s.jsxs)("table",{className:"w-full text-left",children:[(0,s.jsx)("thead",{className:"bg-slate-50/80 border-b border-slate-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-6 text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Origem"}),(0,s.jsx)("th",{className:"p-6 text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Destino"}),(0,s.jsx)("th",{className:"p-6 text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Status"}),(0,s.jsx)("th",{className:"p-6"})]})}),(0,s.jsx)("tbody",{children:a.map(e=>(0,s.jsx)("tr",{className:"border-b border-slate-50 hover:bg-slate-50/50 transition-all group",children:d===e.id?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("input",{className:"w-full p-3 border border-blue-200 bg-blue-50 rounded-xl text-sm font-bold",value:p.origem,onChange:e=>m({...p,origem:e.target.value}),autoFocus:!0})}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsx)("input",{className:"w-full p-3 border border-blue-200 bg-blue-50 rounded-xl text-sm font-bold text-[#0052FF]",value:p.destino,onChange:e=>m({...p,destino:e.target.value})})}),(0,s.jsx)("td",{className:"p-4 text-[10px] font-black text-blue-400 uppercase animate-pulse",children:"Editando..."}),(0,s.jsxs)("td",{className:"p-4 text-right flex gap-2 justify-end",children:[(0,s.jsx)("button",{onClick:k,className:"px-4 py-2 bg-emerald-500 text-white rounded-xl text-[9px] font-black uppercase hover:bg-emerald-600",children:"Salvar"}),(0,s.jsx)("button",{onClick:()=>x(null),className:"px-4 py-2 bg-slate-200 text-slate-500 rounded-xl text-[9px] font-black uppercase hover:bg-slate-300",children:"Cancelar"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{className:"p-6 text-sm font-bold text-slate-700",children:e.origem}),(0,s.jsx)("td",{className:"p-6 text-sm font-bold text-[#0052FF]",children:e.destino}),(0,s.jsx)("td",{className:"p-6",children:(0,s.jsx)("button",{onClick:()=>F(e),className:"px-4 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest transition-all ".concat(e.ativa?"bg-emerald-500 text-white shadow-lg shadow-emerald-100":"bg-slate-100 text-slate-400 opacity-60"),children:e.ativa?"● Ativo":"○ Inativo"})}),(0,s.jsxs)("td",{className:"p-6 text-right space-x-3 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)("button",{onClick:()=>{x(e.id),m(e)},className:"text-[10px] font-black text-slate-300 hover:text-[#0052FF] uppercase tracking-tighter transition-colors",children:"Editar"}),(0,s.jsx)("button",{onClick:()=>y(e.id),className:"text-[10px] font-black text-red-200 hover:text-red-500 uppercase tracking-tighter transition-colors",children:"Excluir"})]})]})},e.id))})]})})]}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center py-20 opacity-50",children:(0,s.jsx)("p",{className:"text-sm font-black text-slate-400 uppercase tracking-widest",children:"Carregando empresas..."})})]})}}},e=>{e.O(0,[125,441,255,358],()=>e(e.s=252)),_N_E=e.O()}]);